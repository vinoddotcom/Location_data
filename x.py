import requests
import json
import time

# List of cities to query
cities = list(set(["Aichi", "Aisai", "Ama", "Ama", "Anjō", "Chiryū", "Chita", "Chita", "Gamagōri", "Handa", "Hekinan", "Ichinomiya", "Inazawa", "Inuyama", "Iwakura", "Kariya", "Kasugai", "Kitanagoya", "Kitashitara", "Kiyosu", "Komaki", "Kōnan", "Miyoshi", "Nagakute", "Nagoya", "Nishikasugai", "Nishio", "Nisshin", "Niwa", "Nukata", "Ōbu", "Okazaki", "Owariasahi", "Seto", "Shinshiro", "Tahara", "Takahama", "Tōkai", "Tokoname", "Toyoake", "Toyohashi", "Toyokawa", "Toyota", "Tsushima", "Yatomi", "Akita", "Daisen", "Katagami", "Kazuno", "Kazuno", "Kitaakita", "Kitaakita", "Minamiakita", "Nikaho", "Noshiro", "Ōdate", "Oga", "Ogachi", "Semboku", "Senboku", "Yamamoto", "Yokote", "Yurihonjō", "Yuzawa", "Aomori", "Goshogawara", "Hachinohe", "Higashitsugaru", "Hirakawa", "Hirosaki", "Kamikita", "Kitatsugaru", "Kuroishi", "Minamitsugaru", "Misawa", "Mutsu", "Nakatsugaru", "Nishitsugaru", "Sannohe", "Shimokita", "Towada", "Tsugaru", "Abiko", "Asahi", "Awa", "Chiba", "Chōsei", "Chōshi", "Funabashi", "Futtsu", "Ichihara", "Ichikawa", "Inba", "Inzai", "Isumi", "Isumi", "Kamagaya", "Kamogawa", "Kashiwa", "Katori", "Katori", "Katsuura", "Kimitsu", "Kisarazu", "Matsudo", "Minamibōsō", "Mobara", "Nagareyama", "Narashino", "Narita", "Noda", "Ōamishirasato", "Sakura", "Sanbu", "Sanmu", "Shiroi", "Sodegaura", "Sōsa", "Tateyama", "Tōgane", "Tomisato", "Urayasu", "Yachimata", "Yachiyo", "Yotsukaidō", "Imabari", "Iyo", "Iyo", "Kamiukena", "Kita", "Kitauwa", "Matsuyama", "Minamiuwa", "Niihama", "Nishiuwa", "Ochi", "Ōzu", "Saijō", "Seiyo", "Shikokuchūō", "Tōon", "Uwajima", "Yawatahama", "Awara", "Echizen", "Fukui", "Imadate", "Katsuyama", "Mikata", "Mikatakaminaka", "Nanjō", "Nyū", "Obama", "Ōi", "Ōno", "Sabae", "Sakai", "Tsuruga", "Yoshida", "Asakura", "Asakura", "Buzen", "Chikugo", "Chikujō", "Chikushino", "Dazaifu", "Fukuoka", "Fukutsu", "Iizuka", "Itoshima", "Kaho", "Kama", "Kasuga", "Kasuya", "Kitakyūshū", "Koga", "Kurate", "Kurume", "Mii", "Miyako", "Miyama", "Miyawaka", "Mizuma", "Munakata", "Nakagawa", "Nakama", "Nōgata", "Ogōri", "Ōkawa", "Ōmuta", "Onga", "Ōnojō", "Tagawa", "Tagawa", "Ukiha", "Yame", "Yame", "Yanagawa", "Yukuhashi", "Adachi", "Aizuwakamatsu", "Date", "Date", "Fukushima", "Futaba", "Higashishirakawa", "Ishikawa", "Iwaki", "Iwase", "Kawanuma", "Kitakata", "Kōriyama", "Minamiaizu", "Minamisōma", "Motomiya", "Nihonmatsu", "Nishishirakawa", "Ōnuma", "Shirakawa", "Sōma", "Sōma", "Sukagawa", "Tamura", "Tamura", "Yama", "Anpachi", "Ena", "Fuwa", "Gero", "Gifu", "Gujō", "Hashima", "Hashima", "Hida", "Ibi", "Kaizu", "Kakamigahara", "Kamo", "Kani", "Kani", "Mino", "Minokamo", "Mizuho", "Mizunami", "Motosu", "Motosu", "Nakatsugawa", "Ōgaki", "Ōno", "Seki", "Tajimi", "Takayama", "Toki", "Yamagata", "Yōrō", "Agatsuma", "Annaka", "Fujioka", "Isesaki", "Kanra", "Kiryū", "Kitagunma", "Maebashi", "Midori", "Numata", "Ōra", "Ōta", "Sawa", "Shibukawa", "Takasaki", "Tano", "Tatebayashi", "Tomioka", "Tone", "Aki", "Akitakata", "Etajima", "Fuchū", "Fukuyama", "Hatsukaichi", "Higashihiroshima", "Hiroshima", "Jinseki", "Kure", "Mihara", "Miyoshi", "Onomichi", "Ōtake", "Sera", "Shōbara", "Takehara", "Toyota", "Yamagata", "Abashiri", "Akabira", "Asahikawa", "Ashibetsu", "Bibai", "Chitose", "Date", "Ebetsu", "Eniwa", "Fukagawa", "Furano", "Hakodate", "Hidaka", "Hiyama", "Hokuto", "Iburi", "Ishikari", "Ishikari", "Iwamizawa", "Kamikawa", "Kitahiroshima", "Kitami", "Kushiro", "Kushiro", "Mikasa", "Mombetsu", "Muroran", "Nayoro", "Nemuro", "Nemuro", "Noboribetsu", "Obihiro", "Ohotsuku", "Oshima", "Otaru", "Rumoi", "Rumoi", "Sapporo", "Shibetsu", "Shiribeshi", "Sorachi", "Sōya", "Sunagawa", "Takikawa", "Tokachi", "Tomakomai", "Utashinai", "Wakkanai", "Yūbari", "Aioi", "Akashi", "Akō", "Akō", "Amagasaki", "Asago", "Ashiya", "Awaji", "Himeji", "Ibo", "Itami", "Kako", "Kakogawa", "Kanzaki", "Kasai", "Katō", "Kawabe", "Kawanishi", "Kōbe", "Mikata", "Miki", "Minamiawaji", "Nishinomiya", "Nishiwaki", "Ono", "Sanda", "Sayō", "Shisō", "Sumoto", "Taka", "Takarazuka", "Takasago", "Tamba", "Tamba", "Tatsuno", "Toyooka", "Yabu", "Bandō", "Chikusei", "Higashiibaraki", "Hitachi", "Hitachinaka", "Hitachiōmiya", "Hitachiōta", "Hokota", "Inashiki", "Inashiki", "Ishioka", "Itako", "Jōsō", "Kamisu", "Kasama", "Kashima", "Kasumigaura", "Kitaibaraki", "Kitasōma", "Koga", "Kuji", "Mito", "Moriya", "Naka", "Naka", "Namegata", "Omitama", "Ryūgasaki", "Sakuragawa", "Sashima", "Shimotsuma", "Takahagi", "Toride", "Tsuchiura", "Tsukuba", "Tsukubamirai", "Ushiku", "Yūki", "Yūki", "Hakui", "Hakui", "Hakusan", "Hōsu", "Kaga", "Kahoku", "Kahoku", "Kanazawa", "Kashima", "Komatsu", "Nanao", "Nomi", "Nomi", "Nonoichi", "Suzu", "Wajima", "Hachimantai", "Hanamaki", "Ichinoseki", "Isawa", "Iwate", "Kamaishi", "Kamihei", "Kesen", "Kitakami", "Kuji", "Kunohe", "Miyako", "Morioka", "Ninohe", "Ninohe", "Nishiiwai", "Ōfunato", "Ōshū", "Rikuzentakata", "Shimohei", "Shiwa", "Takizawa", "Tōno", "Waga", "Ayauta", "Higashikagawa", "Kagawa", "Kan", "Kita", "Marugame", "Mitoyo", "Nakatado", "Sakaide", "Sanuki", "Shōzu", "Takamatsu", "Zentsūji", "Aira", "Aira", "Akune", "Amami", "Hioki", "Ibusuki", "Ichikikushikino", "Isa", "Izumi", "Izumi", "Kagoshima", "Kagoshima", "Kanoya", "Kimotsuki", "Kirishima", "Kumage", "Makurazaki", "Minamikyūshū", "Minamisatsuma", "Nishinoomote", "Ōshima", "Satsuma", "Satsumasendai", "Shibushi", "Soo", "Soo", "Tarumizu", "Aikō", "Ashigarakami", "Ashigarashimo", "Atsugi", "Ayase", "Chigasaki", "Ebina", "Fujisawa", "Hadano", "Hiratsuka", "Isehara", "Kamakura", "Kawasaki", "Kōza", "Minamiashigara", "Miura", "Miura", "Naka", "Odawara", "Sagamihara", "Yamato", "Yokohama", "Yokosuka", "Zama", "Zushi", "Agawa", "Aki", "Aki", "Hata", "Kami", "Kōchi", "Kōnan", "Muroto", "Nagaoka", "Nankoku", "Shimanto", "Sukumo", "Susaki", "Takaoka", "Tosa", "Tosa", "Tosashimizu", "Amakusa", "Amakusa", "Arao", "Ashikita", "Aso", "Aso", "Hitoyoshi", "Kamiamakusa", "Kamimashiki", "Kikuchi", "Kikuchi", "Kōshi", "Kuma", "Kumamoto", "Minamata", "Shimomashiki", "Tamana", "Tamana", "Uki", "Uto", "Yamaga", "Yatsushiro", "Yatsushiro", "Ayabe", "Fukuchiyama", "Funai", "Jōyō", "Kameoka", "Kizugawa", "Kuse", "Kyōtanabe", "Kyōtango", "Kyōto", "Maizuru", "Miyazu", "Mukō", "Nagaokakyō", "Nantan", "Otokuni", "Sōraku", "Tsuzuki", "Uji", "Yawata", "Yosa", "Iga", "Inabe", "Inabe", "Ise", "Kameyama", "Kitamuro", "Kumano", "Kuwana", "Kuwana", "Matsusaka", "Mie", "Minamimuro", "Nabari", "Owase", "Shima", "Suzuka", "Taki", "Toba", "Tsu", "Watarai", "Yokkaichi", "Higashimatsushima", "Igu", "Ishinomaki", "Iwanuma", "Kakuda", "Kami", "Katta", "Kesennuma", "Kurihara", "Kurokawa", "Miyagi", "Motoyoshi", "Natori", "Ōsaki", "Oshika", "Sendai", "Shibata", "Shiogama", "Shiroishi", "Tagajō", "Tōda", "Tome", "Tomiya", "Watari", "Ebino", "Higashimorokata", "Higashiusuki", "Hyūga", "Kitamorokata", "Kobayashi", "Koyu", "Kushima", "Miyakonojō", "Miyazaki", "Nichinan", "Nishimorokata", "Nishiusuki", "Nobeoka", "Saito", "Azumino", "Chiisagata", "Chikuma", "Chino", "Hanishina", "Higashichikuma", "Iida", "Iiyama", "Ina", "Kamiina", "Kamiminochi", "Kamitakai", "Kiso", "Kitaazumi", "Kitasaku", "Komagane", "Komoro", "Matsumoto", "Minamisaku", "Nagano", "Nakano", "Okaya", "Ōmachi", "Saku", "Shimoina", "Shimominochi", "Shimotakai", "Shiojiri", "Suwa", "Suwa", "Suzaka", "Tōmi", "Ueda", "Gotō", "Higashisonogi", "Hirado", "Iki", "Isahaya", "Kitamatsuura", "Matsuura", "Minami", "Minamishimabara", "Nagasaki", "Nishisonogi", "Ōmura", "Saikai", "Sasebo", "Shimabara", "Tsushima", "Unzen", "Gojō", "Gose", "Ikoma", "Ikoma", "Kashiba", "Kashihara", "Katsuragi", "Kitakatsuragi", "Nara", "Sakurai", "Shiki", "Takaichi", "Tenri", "Uda", "Uda", "Yamabe", "Yamatokōriyama", "Yamatotakada", "Yoshino", "Agano", "Gosen", "Higashikanbara", "Itoigawa", "Iwafune", "Jōetsu", "Kamo", "Kariwa", "Kashiwazaki", "Kitakanbara", "Minamikanbara", "Minamiuonuma", "Minami", "Mitsuke", "Murakami", "Myōkō", "Nagaoka", "Nakauonuma", "Niigata", "Nishikanbara", "Ojiya", "Sado", "Sanjō", "Santō", "Shibata", "Tainai", "Tōkamachi", "Tsubame", "Uonuma", "Beppu", "Bungo", "Bungotakada", "Hayami", "Higashikunisaki", "Hita", "Kitsuki", "Kunisaki", "Kusu", "Nakatsu", "Ōita", "Saiki", "Taketa", "Tsukumi", "Usa", "Usuki", "Yufu", "Aida", "Akaiwa", "Asakuchi", "Asakuchi", "Bizen", "Ibara", "Kaga", "Kasaoka", "Katsuta", "Kume", "Kurashiki", "Maniwa", "Maniwa", "Mimasaka", "Niimi", "Oda", "Okayama", "Setouchi", "Sōja", "Takahashi", "Tamano", "Tomata", "Tsukubo", "Tsuyama", "Wake", "Ginowan", "Ishigaki", "Itoman", "Kunigami", "Miyako", "Miyakojima", "Nago", "Naha", "Nakagami", "Nanjō", "Okinawa", "Shimajiri", "Tomigusuku", "Urasoe", "Uruma", "Yaeyama", "Daitō", "Fujiidera", "Habikino", "Hannan", "Higashiōsaka", "Hirakata", "Ibaraki", "Ikeda", "Izumi", "Izumiōtsu", "Izumisano", "Kadoma", "Kaizuka", "Kashiwara", "Katano", "Kawachinagano", "Kishiwada", "Matsubara", "Minamikawachi", "Minō", "Mishima", "Moriguchi", "Neyagawa", "Ōsaka", "Ōsakasayama", "Sakai", "Senboku", "Sennan", "Sennan", "Settsu", "Shijōnawate", "Suita", "Takaishi", "Takatsuki", "Tondabayashi", "Toyonaka", "Toyono", "Yao", "Fujitsu", "Higashimatsuura", "Imari", "Kanzaki", "Kanzaki", "Karatsu", "Kashima", "Kishima", "Miyaki", "Nishimatsuura", "Ogi", "Saga", "Takeo", "Taku", "Tosu", "Ureshino", "Ageo", "Asaka", "Chichibu", "Chichibu", "Fujimi", "Fujimino", "Fukaya", "Gyōda", "Hannō", "Hanyū", "Hasuda", "Hidaka", "Higashimatsuyama", "Hiki", "Honjō", "Iruma", "Iruma", "Kasukabe", "Kawagoe", "Kawaguchi", "Kazo", "Kita", "Kita", "Kitamoto", "Kodama", "Kōnosu", "Koshigaya", "Kuki", "Kumagaya", "Minami", "Misato", "Niiza", "Okegawa", "Ōsato", "Saitama", "Sakado", "Satte", "Sayama", "Shiki", "Shiraoka", "Sōka", "Toda", "Tokorozawa", "Tsurugashima", "Wakō", "Warabi", "Yashio", "Yoshikawa", "Echi", "Gamō", "Higashiōmi", "Hikone", "Inukami", "Kōka", "Konan", "Kusatsu", "Maibara", "Moriyama", "Nagahama", "Ōmihachiman", "Ōtsu", "Rittō", "Takashima", "Yasu", "Gōtsu", "Hamada", "Iishi", "Izumo", "Kanoashi", "Masuda", "Matsue", "Nita", "Ōchi", "Ōda", "Oki", "Unnan", "Yasugi", "Atami", "Fuji", "Fujieda", "Fujinomiya", "Fukuroi", "Gotemba", "Haibara", "Hamamatsu", "Itō", "Iwata", "Izu", "Izunokuni", "Kakegawa", "Kamo", "Kikugawa", "Kosai", "Makinohara", "Mishima", "Numazu", "Omaezaki", "Shimada", "Shimoda", "Shizuoka", "Shūchi", "Suntō", "Susono", "Tagata", "Yaizu", "Ashikaga", "Haga", "Kanuma", "Kawachi", "Mo", "Nasu", "Nasukarasuyama", "Nasushiobara", "Nikkō", "Ōtawara", "Oyama", "Sakura", "Sano", "Shimotsuga", "Shimotsuke", "Shioya", "Tochigi", "Utsunomiya", "Yaita", "Anan", "Awa", "Itano", "Kaifu", "Katsuura", "Komatsushima", "Mima", "Mima", "Miyoshi", "Miyoshi", "Myōdō", "Myōzai", "Naka", "Naruto", "Tokushima", "Yoshinogawa", "Akiruno", "Akishima", "Chōfu", "Fuchū", "Fussa", "Hachijō", "Hachiōji", "Hamura", "Higashikurume", "Higashimurayama", "Higashiyamato", "Hino", "Inagi", "Kiyose", "Kodaira", "Koganei", "Kokubunji", "Komae", "Kunitachi", "Machida", "Mitaka", "Miyake", "Musashimurayama", "Musashino", "Nishitama", "Nishitōkyō", "Ogasawara", "Ōme", "Ōshima", "Tachikawa", "Tama", "Tōkyō", "Hino", "Iwami", "Kurayoshi", "Saihaku", "Sakaiminato", "Tōhaku", "Tottori", "Yazu", "Yonago", "Himi", "Imizu", "Kurobe", "Nakaniikawa", "Namerikawa", "Nanto", "Oyabe", "Shimoniikawa", "Takaoka", "Tonami", "Toyama", "Uozu", "Arida", "Arida", "Gobō", "Hashimoto", "Hidaka", "Higashimuro", "Ito", "Iwade", "Kainan", "Kaisō", "Kinokawa", "Nishimuro", "Shingū", "Tanabe", "Wakayama", "Akumi", "Higashimurayama", "Higashine", "Higashiokitama", "Higashitagawa", "Kaminoyama", "Kitamurayama", "Mogami", "Murayama", "Nagai", "Nan", "Nishimurayama", "Nishiokitama", "Obanazawa", "Sagae", "Sakata", "Shinjō", "Tendō", "Tsuruoka", "Yamagata", "Yonezawa", "Abu", "Hagi", "Hikari", "Hōfu", "Iwakuni", "Kudamatsu", "Kuga", "Kumage", "Mine", "Nagato", "Ōshima", "San", "Shimonoseki", "Shūnan", "Ube", "Yamaguchi", "Yanai", "Chūō", "Fuefuki", "Fujiyoshida", "Hokuto", "Kai", "Kitatsuru", "Kōfu", "Kōshū", "Minamiarupusu", "Minamikoma", "Minamitsuru", "Nakakoma", "Nirasaki", "Nishiyatsushiro", "Ōtsuki", "Tsuru", "Uenohara", "Yamanashi", "Nippon"]))

# Base URL for the Nominatim API
base_url = "https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&polygon_geojson=1&accept-language=en"

# Function to get city data from the API
def get_city_data(city, country="Japan"):
    url = f"{base_url}&city={city}&country={country}"
    headers = {
        'User-Agent': 'DF/1.0 (bapami8521@lucvu.com)'  # Replace with your email and app details
    }
    response = requests.get(url, headers=headers)
    if response.status_code == 200:
        return response.json()
    else:
        print(f"Error fetching data for {city}: {response.status_code}")
        print(response.content)
        return []

# Dictionary to hold the results
results = {}

# Fetch data for each city and extract the required properties
for city in cities:
    time.sleep(1)
    city_data = get_city_data(city)
    if city_data:
        # Assuming we take the first result if there are multiple
        first_result = city_data[0]
        display_name = first_result.get("display_name", "")
        place_id = first_result.get("place_id", "")
        results[city] = {
            "display_name": display_name,
            "place_id": place_id
        }
    else:
        results[city] = {
            "display_name": "Not found",
            "place_id": "Not found"
        }
        print(f"not found {city}")
    print(city)

# Save the results to a JSON file
with open("japan_data.json", "w", encoding="utf-8") as f:
    json.dump(results, f, ensure_ascii=False, indent=4)

print("Data saved to city_data.json")
